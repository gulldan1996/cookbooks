(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{101:function(e,t,n){},109:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(8),c=n.n(i),o=(n(101),n(18)),l=n(20),u=n(43),s=n(74),d=n(9),p=n(14),m="LOAD_RECIPE",f="INPUT_HANDLER",b="RESET_INPUT",g="HISTORY_LOCATION",E="RELOADING",h="MODIFY_RECIPE",v="HISTORY_INPUT_HANDLER",O="LOAD_HISTORY",y="HISTORY_HANDLER_ID",j=function(){return{type:b}},x=function(){return{type:E}},w=new Date,R=w.getDate(),k=w.getMonth()+1,N=w.getFullYear();R<10&&(R="0"+R),k<10&&(k="0"+k);var S=w=k+"-"+R+"-"+N,I={recipe:[],historyRecipe:[],form:{name:"",description:"",data:S},formUpdate:{name:"",description:""},reloading:!0,historyId:null,location:"Recipe List",filteredHistory:null};var C=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||u.c,D=[s.a],_=Object(u.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:I,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(p.a)({},e,{recipe:t.load,reloading:!0});case O:return Object(p.a)({},e,{historyRecipe:t.load,reloading:!0});case f:var n=t.e.target.name,a=t.e.target.value;return t.e.persist(),Object(p.a)({},e,{form:Object(p.a)({},e.form,Object(d.a)({},n,a))});case b:return Object(p.a)({},e,{form:{name:"",description:"",data:S},reloading:!1});case g:var r,i=t.location;return"/"===i&&(r="Recipe List"),"/create"===i&&(r="Create recipe"),"/modify/:id"===i&&(r=""),"/previous"===i&&(r="Previous version page"),Object(p.a)({},e,{location:r});case E:return Object(p.a)({},e,{reloading:!1});case v:var c=t.e.target.name,o=t.e.target.value;return t.e.persist(),Object(p.a)({},e,{formUpdate:Object(p.a)({},e.formUpdate,Object(d.a)({},c,o))});case h:var l=e.recipe.filter((function(e){return e._id===t.id})),u=l[0],s=u.name,j=u.description,x=u._id;return Object(p.a)({},e,{formUpdate:{name:s,description:j,_id:x}});case y:var w=e.historyRecipe.filter((function(e){return e.recipeId===t.id})).sort((function(e,t){return e.date.localeCompare(t.date)})).reverse();return Object(p.a)({},e,{filteredHistory:w});default:return e}}),C(u.a.apply(void 0,D))),H=n(13),L=n.n(H),T=n(22),P=n(19),U=n(3),B=n(161),A=n(143),W=Object(A.a)((function(e){return{appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:Object(d.a)({width:"calc(100% - ".concat(240,"px)"),marginLeft:240,transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},e.breakpoints.down("sm"),{width:"calc(100% - ".concat(65,"px)"),marginLeft:65})}})),Y=n(146),z=n(149),q=n(148),F=n(37),G=n(75),M=n.n(G),J=function(e){var t=e.open,n=e.handleDrawerOpen,a=e.location,i=e.handleDrawerClose,c=W();return r.a.createElement(Y.a,{position:"fixed",className:Object(U.a)(c.appBar,Object(d.a)({},c.appBarShift,t))},r.a.createElement(q.a,null,r.a.createElement(z.a,{color:"inherit","aria-label":"open drawer",onClick:t?i:n,edge:"start",className:Object(U.a)(c.menuButton,t&&c.hide)},r.a.createElement(M.a,null)),r.a.createElement(F.a,{variant:"h6",noWrap:!0},a)))},X=Object(A.a)((function(e){var t;return{root:{display:"flex"},menuButton:{marginRight:e.spacing(2)},hide:{display:"none"},drawer:Object(d.a)({width:240,flexShrink:0},e.breakpoints.down("sm"),{width:65}),drawerPaper:Object(d.a)({width:240},e.breakpoints.down("sm"),{width:65}),drawerHeader:Object(p.a)({display:"flex",alignItems:"center",padding:e.spacing(0,1)},e.mixins.toolbar,{justifyContent:"flex-end"}),content:(t={flexGrow:1,padding:e.spacing(3),transition:e.transitions.create("margin",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),marginLeft:-240},Object(d.a)(t,e.breakpoints.up("sm"),{marginLeft:-240}),Object(d.a)(t,e.breakpoints.down("sm"),{marginLeft:-65}),t),contentShift:{transition:e.transitions.create("margin",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen}),marginLeft:0}}})),V=n(23),K=n(165),Q=n(154),Z=n(80),$=n.n(Z),ee=n(81),te=n.n(ee),ne=n(150),ae=n(151),re=n(152),ie=n(153),ce=n(78),oe=n.n(ce),le=n(77),ue=n.n(le),se=n(79),de=n.n(se),pe=function(){return r.a.createElement(ne.a,null,r.a.createElement(ae.a,{button:!0,component:o.b,to:"/"},r.a.createElement(re.a,null,r.a.createElement(ue.a,null)),r.a.createElement(ie.a,{primary:"Recipe list"})),r.a.createElement(ae.a,{button:!0,component:o.b,to:"/create"},r.a.createElement(re.a,null,r.a.createElement(oe.a,null)),r.a.createElement(ie.a,{primary:"Create recipe"})),r.a.createElement(ae.a,{button:!0,component:o.b,to:"/previous"},r.a.createElement(re.a,null,r.a.createElement(de.a,null)),r.a.createElement(ie.a,{primary:"Previous version"})))},me=function(e){var t=e.open,n=e.handleDrawerClose,a=X(),i=Object(V.a)();return r.a.createElement(K.a,{className:a.drawer,variant:"persistent",anchor:"left",open:t,classes:{paper:a.drawerPaper}},r.a.createElement("div",{className:a.drawerHeader},r.a.createElement(z.a,{onClick:n},"ltr"===i.direction?r.a.createElement($.a,null):r.a.createElement(te.a,null))),r.a.createElement(Q.a,null),r.a.createElement(pe,null))},fe=n(36),be=n(41),ge=function(e){return e},Ee=Object(be.a)(ge,(function(e){return e.recipe})),he=Object(be.a)(ge,(function(e){return e.reloading})),ve=Object(be.a)(ge,(function(e){return e.filteredHistory})),Oe=Object(be.a)(ge,(function(e){return e.form})),ye=Object(be.a)(ge,(function(e){return e.formUpdate})),je=Object(be.a)(ge,(function(e){return e.location})),xe=n(54),we=Object(A.a)((function(e){return{root:{maxWidth:345,marginRight:30,marginBottom:30},media:{height:0},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:xe.a[500]}}})),Re=n(156),ke=n(157),Ne=n(158),Se=function(){var e=Object(a.useState)(!1),t=Object(P.a)(e,2),n=t[0],r=t[1],i=Object(a.useState)(null),c=Object(P.a)(i,2),o=c[0],l=c[1];return{loading:n,request:Object(a.useCallback)(function(){var e=Object(T.a)(L.a.mark((function e(t){var n,a,i,c,o,u=arguments;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:"Get",a=u.length>2&&void 0!==u[2]?u[2]:null,i=u.length>3&&void 0!==u[3]?u[3]:{},r(!0),e.prev=4,a&&(a=JSON.stringify(a),i["Content-Type"]="application/json"),e.next=8,fetch(t,{method:n,body:a,headers:i});case 8:return c=e.sent,e.next=11,c.json();case 11:if(o=e.sent,c.ok){e.next=14;break}throw new Error(o.message||"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a");case 14:return r(!1),e.abrupt("return",o);case 18:throw e.prev=18,e.t0=e.catch(4),r(!1),l(e.t0.message),e.t0;case 23:case"end":return e.stop()}}),e,null,[[4,18]])})));return function(t){return e.apply(this,arguments)}}(),[]),error:o,clearError:Object(a.useCallback)((function(){return l(null)}),[])}},Ie=n(155),Ce=n(82),De=n.n(Ce),_e=n(53),He=n.n(_e),Le=n(83),Te=n.n(Le),Pe=Object(A.a)({wrapper:{position:"relative"},div:{position:"absolute",top:25,right:-0,left:-4}}),Ue=function(e){var t=e.id,n=e.reloadingRecipe,a=e.modifyRecipe,i=Pe(),c=r.a.useState(!1),l=Object(P.a)(c,2),u=l[0],s=l[1],d=Se(),p=d.loading,m=d.request,f=function(){var e=Object(T.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,m("/api/recipe/delete/".concat(t),"DELETE");case 3:n(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Ie.a,{onClickAway:function(){s(!1)}},r.a.createElement("div",{className:i.wrapper},r.a.createElement(z.a,{"aria-label":"settings",onClick:function(){s((function(e){return!e}))}},r.a.createElement(De.a,null)),u?r.a.createElement(ne.a,{className:i.div},r.a.createElement(ae.a,{component:o.b,to:"modify/".concat(t),onClick:function(){return a(t)}},r.a.createElement(re.a,null,r.a.createElement(z.a,{"aria-label":"edit",size:"small"},r.a.createElement(Te.a,{fontSize:"small"})))),r.a.createElement(ae.a,{onClick:f},r.a.createElement(re.a,null,r.a.createElement(z.a,{"aria-label":"delete",size:"small",disabled:p},r.a.createElement(He.a,{fontSize:"small"}))))):null))},Be=function(e){var t=e.description,n=e.name,a=e.rec,i=e.reloadingRecipe,c=e.modifyRecipe,o=we(),l=a.date.slice(0,10);return r.a.createElement(Re.a,{className:o.root,key:a._id},r.a.createElement(ke.a,{action:r.a.createElement(Ue,{id:a._id,reloadingRecipe:i,modifyRecipe:c}),title:n,subheader:l}),r.a.createElement(Ne.a,null,r.a.createElement(F.a,{variant:"body2",color:"textSecondary",component:"p"},t)))},Ae=n(159),We=n(163),Ye=function(){var e=ze();return r.a.createElement(We.a,{component:"div",className:e.spinner},r.a.createElement(Ae.a,{disableShrink:!0}))},ze=Object(A.a)({spinner:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}}),qe=Object(A.a)({spinner:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",fontSize:25}}),Fe=function(e){var t=e.text,n=qe();return r.a.createElement(We.a,{component:"div",className:n.spinner},t)},Ge=Object(A.a)({root:{display:"flex",flexDirection:"row",flexWrap:"wrap"}}),Me=Object(l.b)((function(e){return{recipe:Ee(e),reloading:he(e)}}),(function(e){return{reloadingRecipe:function(){return e(x())},modifyRecipe:function(t){return e(function(e){return{type:h,id:e}}(t))}}}))((function(e){var t=e.recipe,n=e.reloading,a=e.reloadingRecipe,i=e.modifyRecipe,c=Ge();return r.a.createElement("div",{className:c.root},t&&n?t.map((function(e){var t=e.name,n=e.description,c=e._id;return r.a.createElement(Be,{key:c,name:t,description:n,rec:e,reloadingRecipe:a,modifyRecipe:i})})):r.a.createElement(Ye,null),0===t.length&&n?r.a.createElement(Fe,{text:"You don't have recipes, add a new one"}):null)})),Je=n(162),Xe=Object(A.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:280}}})),Ve=function(e){var t=e.placeholder,n=e.name,a=e.handler,i=e.value,c=Xe();return r.a.createElement(Je.a,{id:"standard-basic",className:c.textField,placeholder:t,name:n,onChange:a,margin:"normal",type:"text",value:i||""})},Ke=Object(A.a)((function(e){return{textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1),width:280}}})),Qe=function(e){var t=e.handler,n=e.name,a=e.placeholder,i=e.value,c=Ke();return r.a.createElement(Je.a,{id:"standard-basic",className:c.textField,placeholder:a,name:n,onChange:t,margin:"normal",type:"text",value:i||"",multiline:!0})},Ze=Object(A.a)((function(e){return{button:{margin:e.spacing(1),width:150},input:{display:"none"}}})),$e=n(160),et=function(e){var t=e.text,n=e.loading,a=e.func,i=Ze();return r.a.createElement($e.a,{variant:"contained",className:i.button,onClick:a,disabled:n,color:"primary"},t)},tt=Object(A.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:50}}),nt=Object(l.b)((function(e){return{form:Oe(e)}}),(function(e){return{inputHandler:function(t){return e(function(e){return{type:f,e:e}}(t))},resetInput:function(){return e(j())}}}))((function(e){var t=e.inputHandler,n=e.form,i=e.resetInput,c=tt(),o=Se(),l=o.loading,u=o.request,s=Object(a.useState)(!1),d=Object(P.a)(s,2),m=d[0],f=d[1],b=function(){var e=Object(T.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u("/api/recipe/create","POST",Object(p.a)({},n));case 3:f(!0),i(),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}();return m?r.a.createElement(fe.a,{to:"/"}):r.a.createElement("div",{className:c.root},r.a.createElement(Ve,{placeholder:"Name your recipe",name:"name",value:n.name,handler:t}),r.a.createElement(Qe,{handler:t,name:"description",value:n.description,placeholder:"Write text about your recipe"}),r.a.createElement(et,{func:b,loading:l,text:"Create"}))})),at=Object(A.a)({root:{display:"flex",flexDirection:"column",alignItems:"center",marginTop:50}}),rt=Object(l.b)((function(e){return{formUpdate:ye(e)}}),(function(e){return{historyInputHandler:function(t){return e(function(e){return{type:v,e:e}}(t))},resetInput:function(){return e(j())}}}))((function(e){var t=e.formUpdate,n=e.historyInputHandler,i=e.resetInput,c=at(),o=Se(),l=o.loading,u=o.request,s=Object(a.useState)(!1),d=Object(P.a)(s,2),m=d[0],f=d[1],b=t.name,g=t.description,E=t._id,h=function(){var e=Object(T.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("modify"),e.next=4,u("/api/recipe/modify/".concat(E),"PUT",Object(p.a)({},t));case 4:f(!0),i(),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}();return m||""===b?r.a.createElement(fe.a,{to:"/"}):r.a.createElement("div",{className:c.root},r.a.createElement(Ve,{name:"name",value:b,handler:n}),r.a.createElement(Qe,{name:"description",value:g,handler:n}),r.a.createElement(et,{func:h,loading:l,text:"Modify"}))})),it=Object(A.a)({root:{maxWidth:345,marginRight:15,marginBottom:30,cursor:"pointer",textDecoration:"none"}}),ct=function(e){var t=e.name,n=e.id,a=e.historyHandlerId,i=it();return r.a.createElement(Re.a,{className:i.root,component:o.b,to:"/historyRecipe/".concat(n),onClick:function(){return a(n)}},r.a.createElement(ke.a,{title:t}))},ot=Object(A.a)((function(e){return{root:{display:"flex",flexDirection:"row",flexWrap:"wrap"}}})),lt=Object(l.b)((function(e){return{history:Ee(e),reloading:he(e)}}),(function(e){return{historyHandlerId:function(t){return e(function(e){return{type:y,id:e}}(t))}}}))((function(e){var t=e.history,n=e.historyHandlerId,a=e.reloading,i=ot();return r.a.createElement("div",{className:i.root},t&&a?t.map((function(e){var t=e.name,a=e._id;return r.a.createElement(ct,{key:a,id:a,name:t,historyHandlerId:n})})):r.a.createElement(Ye,null),0===t.length&&a?r.a.createElement(Fe,{text:"You don't have previous recipes, add a new one recipe"}):null)})),ut=Object(A.a)((function(e){return{root:{display:"flex",flexDirection:"row",flexWrap:"wrap"},card:{maxWidth:345,marginRight:30,marginBottom:30,position:"relative"},media:{height:0},expand:{transform:"rotate(0deg)",marginLeft:"auto",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},expandOpen:{transform:"rotate(180deg)"},avatar:{backgroundColor:xe.a[500]},btn:{position:"absolute",top:18,right:-20}}})),st=Object(l.b)((function(e){return{filteredHistory:ve(e),reloading:he(e)}}),(function(e){return{reloadingRecipe:function(){return e(x())}}}))((function(e){var t=e.filteredHistory,n=e.reloading,a=e.reloadingRecipe,i=ut(),c=Se(),o=c.loading,l=c.request;return r.a.createElement("div",{className:i.root},t&&n?t.map((function(e){var t=e._id,n=e.name,c=e.description,u=e.date.slice(0,19).replace("T","  "),s=function(){var e=Object(T.a)(L.a.mark((function e(){return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l("/api/history/delete/".concat(t),"DELETE");case 3:a(),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}();return r.a.createElement(Re.a,{className:i.card,key:t},r.a.createElement(ke.a,{title:n,subheader:u}),r.a.createElement(Ne.a,null,r.a.createElement(F.a,{variant:"body2",color:"textSecondary",component:"p"},c)),r.a.createElement(re.a,{className:i.btn,onClick:s},r.a.createElement(z.a,{"aria-label":"delete",size:"small",disabled:o},r.a.createElement(He.a,{fontSize:"small"}))))})):r.a.createElement(fe.a,{to:"/"}))})),dt=Object(l.b)((function(e){return{recipe:Ee(e),reloading:he(e),location:je(e)}}),(function(e){return{loadingRecipe:function(t){return e(function(e){return{type:m,load:e}}(t))},historyLocation:function(t){return e(function(e){return{type:g,location:e.location.pathname}}(t))},loadingHistoryRecipe:function(t){return e(function(e){return{type:O,load:e}}(t))}}}))((function(e){var t=e.loadingRecipe,n=e.reloading,i=e.historyLocation,c=e.location,o=e.loadingHistoryRecipe,l=r.a.createElement(fe.d,null,r.a.createElement(fe.b,{path:"/",exact:!0},r.a.createElement(Me,null)),r.a.createElement(fe.b,{path:"/create"},r.a.createElement(nt,null)),r.a.createElement(fe.b,{path:"/modify/:id"},r.a.createElement(rt,null)),r.a.createElement(fe.b,{path:"/previous"},r.a.createElement(lt,null)),r.a.createElement(fe.b,{path:"/historyRecipe/:id"},r.a.createElement(st,null)),r.a.createElement(fe.a,{to:"/"})),u=Object(fe.g)(),s=Se().request,p=X(),m=r.a.useState(!1),f=Object(P.a)(m,2),b=f[0],g=f[1],E=function(){g(!1)};return Object(a.useEffect)((function(){i(u)}),[u.location.pathname]),Object(a.useEffect)((function(){function e(){return(e=Object(T.a)(L.a.mark((function e(){var n,a;return L.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,s("/api/recipe/history","GET");case 2:return n=e.sent,o(n),e.next=6,s("/api/recipe/recipe","GET");case 6:a=e.sent,t(a);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[n]),r.a.createElement("div",{className:p.root},r.a.createElement(B.a,null),r.a.createElement(J,{open:b,handleDrawerOpen:function(){g(!0)},location:c,handleDrawerClose:E}),r.a.createElement(me,{open:b,handleDrawerClose:E}),r.a.createElement("main",{className:Object(U.a)(p.content,Object(d.a)({},p.contentShift,b))},r.a.createElement("div",{className:p.drawerHeader}),l))})),pt=function(){return r.a.createElement(o.a,null,r.a.createElement(l.a,{store:_},r.a.createElement(dt,null)))};c.a.render(r.a.createElement(pt,null),document.getElementById("root"))},96:function(e,t,n){e.exports=n(109)}},[[96,1,2]]]);
//# sourceMappingURL=main.104825b9.chunk.js.map